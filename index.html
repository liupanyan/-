<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¯å¸ˆå¸®-ä¾›åº”å•†ç®¡ç†å¹³å°</title>
    <style>
        /* ==========================================================================
           1. CSS Reset & åŸºç¡€å˜é‡ (æ©™è‰²ç³»)
           ========================================================================== */
        :root {
            --primary-color: #ff6600;       /* è¯å¸ˆå¸®/æ·˜å®é£æ ¼æ©™ */
            --primary-hover: #ff8533;
            --text-color: #333333;          /* ä¸»è¦æ–‡å­— */
            --text-secondary: #666666;      /* æ¬¡è¦æ–‡å­— */
            --border-color: #e5e5e5;        /* è¾¹æ¡†è‰² */
            --bg-body: #f0f2f5;             /* é¡µé¢èƒŒæ™¯ç° */
            --bg-sidebar: #ffffff;          /* ä¾§è¾¹æ æ”¹ä¸ºç™½è‰² */
            --danger-color: #ff4d4f;
            --success-color: #52c41a;
            --header-height: 50px;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: "Microsoft YaHei", -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--bg-body);
            color: var(--text-color);
            font-size: 12px; /* ç´§å‡‘é£æ ¼ */
            line-height: 1.5;
            height: 100vh;
            display: flex;
        }

        a {
            color: #0066cc; /* é“¾æ¥è‰²æ”¹ä¸ºé€šç”¨çš„è“è‰²ï¼Œä¸æ©™è‰²åŒºåˆ† */
            text-decoration: none;
            cursor: pointer;
        }
        a:hover {
            color: var(--primary-color);
            text-decoration: underline;
        }

        /* å·¥å…·ç±» */
        .hidden { display: none !important; }
        .ml-10 { margin-left: 10px; }
        .mt-10 { margin-top: 10px; }
        .text-orange { color: var(--primary-color); }
        .text-gray { color: #999; }
        .bold { font-weight: bold; }

        /* ==========================================================================
           2. ä¾§è¾¹æ  (Light Theme)
           ========================================================================== */
        .sidebar {
            width: 180px; /* ç¨å¾®å˜çª„ */
            background: var(--bg-sidebar);
            flex-shrink: 0;
            border-right: 1px solid #ddd;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }
        .logo {
            height: 50px;
            display: flex;
            align-items: center;
            padding-left: 15px;
            border-bottom: 1px solid #eee;
        }
        .logo img {
            height: 32px;
            margin-right: 8px;
        }
        .logo-text {
            font-size: 16px;
            font-weight: bold;
            color: var(--primary-color);
        }

        .menu {
            padding-top: 10px;
        }
        .menu-group {
            border-bottom: 1px solid #f5f5f5;
            margin-bottom: 5px;
        }
        .menu-item {
            height: 36px;
            line-height: 36px;
            padding-left: 20px;
            cursor: pointer;
            color: #333;
            display: flex;
            align-items: center;
            position: relative;
        }
        .menu-item:hover {
            background-color: #fff7f0;
            color: var(--primary-color);
        }
        .menu-item.active {
            color: var(--primary-color);
            background-color: #fff0e6;
            border-right: 3px solid var(--primary-color);
        }
        .menu-icon {
            margin-right: 8px;
            font-size: 14px;
            width: 16px;
            text-align: center;
        }
        .menu-arrow {
            position: absolute;
            right: 10px;
            color: #999;
            font-size: 12px;
        }

        /* ==========================================================================
           3. ä¸»å†…å®¹åŒº
           ========================================================================== */
        .main-layout {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            background: #fff; /* ä¸»èƒŒæ™¯æ”¹ä¸ºç™½ï¼Œç¬¦åˆæˆªå›¾ */
        }

        /* é¡¶éƒ¨ Header */
        .header {
            height: 36px;
            background: #f5f5f5;
            border-bottom: 1px solid #ddd;
            padding: 0 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-size: 12px;
        }
        .header-left {
            display: flex;
            align-items: center;
        }
        .store-name {
            font-weight: bold;
            font-size: 14px;
            margin-right: 10px;
        }
        .store-badge {
            background: #52c41a;
            color: #fff;
            padding: 1px 4px;
            border-radius: 2px;
            font-size: 10px;
            margin-right: 10px;
        }
        .erp-status {
            color: #666;
        }
        .erp-status span {
            color: red;
        }

        .header-right {
            display: flex;
            gap: 15px;
            color: #666;
        }

        /* å†…å®¹ Tab æ  (ä»¿æˆªå›¾) */
        .content-tabs {
            height: 40px;
            background: #fff;
            border-bottom: 2px solid var(--primary-color);
            padding-left: 20px;
            display: flex;
            align-items: flex-end;
        }
        .tab-item {
            padding: 8px 20px;
            cursor: pointer;
            border: 1px solid #ddd;
            border-bottom: none;
            background: #f8f8f8;
            margin-right: 4px;
            border-radius: 4px 4px 0 0;
            position: relative;
            top: 2px; /* ç›–ä½åº•è¾¹æ¡† */
        }
        .tab-item.active {
            background: var(--primary-color);
            color: #fff;
            border-color: var(--primary-color);
            font-weight: bold;
        }
        
        /* é¡µé¢å®¹å™¨ */
        .page-container {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
        }

        /* ==========================================================================
           4. èµ„é‡‘ç®¡ç† - è¥é”€æœåŠ¡é¢åº¦é¡µ (ç‰¹å®šæ ·å¼)
           ========================================================================== */
        .quota-header-banner {
            background: #fff;
            border: 1px solid #eee;
            padding: 15px 20px;
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        .quota-big-text {
            font-size: 14px;
            font-weight: bold;
            margin-right: 10px;
        }
        .quota-number {
            font-size: 24px;
            color: #ffaa00; /* é‡‘é»„è‰² */
            font-weight: bold;
            margin-right: 20px;
        }
        .btn-buy {
            background-color: #e65c00; /* æ·±æ©™è‰²æŒ‰é’® */
            color: #fff;
            border: none;
            padding: 6px 20px;
            border-radius: 2px;
            font-size: 14px;
            cursor: pointer;
        }
        .btn-buy:hover {
            background-color: #cc5200;
        }
        .quota-desc {
            margin-left: 40px;
            color: #666;
            font-size: 12px;
        }

        /* ç­›é€‰æ  */
        .filter-bar {
            background: #f9f9f9;
            padding: 10px;
            border: 1px solid #eee;
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        .filter-item {
            margin-right: 15px;
            display: flex;
            align-items: center;
        }
        .filter-label {
            margin-right: 5px;
        }
        .input-control {
            height: 28px;
            border: 1px solid #ccc;
            padding: 0 5px;
            /* width: 140px; */
            border-radius: 2px;
        }
        .input-control.readonly {
            background-color: #f5f5f5;
            cursor: not-allowed;
        }
        .btn-search {
            background: #e65c00;
            color: #fff;
            border: none;
            height: 28px;
            padding: 0 15px;
            margin-right: 10px;
            cursor: pointer;
            border-radius: 2px;
        }
        .btn-export {
            background: #e65c00;
            color: #fff;
            border: none;
            height: 28px;
            padding: 0 15px;
            cursor: pointer;
            border-radius: 2px;
        }

        /* è¡¨æ ¼æ ·å¼ (ä»¿ EasyUI/Element é£æ ¼) */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            border: 1px solid #ddd;
        }
        .data-table th {
            background: #eee;
            padding: 8px 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
            border-right: 1px solid #ddd;
            font-weight: bold;
            color: #333;
        }
        .data-table td {
            padding: 8px 10px;
            border-bottom: 1px solid #ddd;
            border-right: 1px solid #ddd;
            color: #333;
        }
        .data-table tr:hover {
            background: #fdfdfd;
        }
        .data-table tr:nth-child(even) {
            background: #f9f9f9;
        }

        /* ==========================================================================
           5. ä¸“å“åˆ¸æ¨å¹¿åˆ—è¡¨é¡µ (é€‚é…æ–°é£æ ¼)
           ========================================================================== */
        .btn-create {
            background: var(--primary-color);
            color: #fff;
            border: none;
            padding: 6px 15px;
            border-radius: 2px;
            cursor: pointer;
        }
        .promotion-list-toolbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding: 10px;
            background: #f9f9f9;
            border: 1px solid #eee;
        }
        .promo-status-badge {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 2px;
            font-size: 12px;
        }
        .status-running { background: #e6f7ff; color: #1890ff; border: 1px solid #91d5ff; }
        .status-pending { background: #f6ffed; color: #52c41a; border: 1px solid #b7eb8f; }

        /* ==========================================================================
           7. æ–°å»º/è¡¨å•é¡µæ ·å¼ (View-Create)
           ========================================================================== */
        .form-container {
            background: #fff;
            padding: 20px;
            /* border: 1px solid #ddd; */
        }
        .form-section {
            margin-bottom: 30px;
        }
        .form-title {
            font-size: 14px;
            font-weight: bold;
            color: #333;
            margin-bottom: 20px;
            padding-left: 10px;
            border-left: 3px solid var(--primary-color);
        }
        .form-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 20px;
        }
        .form-label {
            width: 120px;
            text-align: right;
            margin-right: 20px;
            color: #666;
            padding-top: 5px;
        }
        .form-label.required::before {
            content: "* ";
            color: var(--danger-color);
        }
        .form-content {
            flex: 1;
            max-width: 600px;
        }
        .hint-text {
            color: #999;
            font-size: 12px;
            margin-top: 5px;
        }
        .radio-group {
            display: flex;
            gap: 20px;
            padding-top: 5px;
        }
        .radio-label {
            cursor: pointer;
            display: flex;
            align-items: center;
        }
        .radio-label input {
            margin-right: 5px;
        }
        .info-block {
            background: #fff7e6;
            border: 1px solid #ffd591;
            padding: 10px;
            color: #666;
            margin-bottom: 20px;
            font-size: 12px;
        }
        .error-msg {
            color: var(--danger-color);
            margin-top: 4px;
            display: none;
        }
        .form-item.has-error .input-control {
            border-color: var(--danger-color);
        }
        .form-item.has-error .error-msg {
            display: block;
        }
        .btn-cancel {
            background: #fff;
            border: 1px solid #ddd;
            color: #333;
            padding: 6px 25px;
            border-radius: 2px;
            cursor: pointer;
            margin-right: 10px;
        }
        .btn-submit {
            background: var(--primary-color);
            color: #fff;
            border: none;
            padding: 6px 25px;
            border-radius: 2px;
            cursor: pointer;
        }
        .btn-submit:hover {
            background: var(--primary-hover);
        }

        /* ==========================================================================
           8. è¯¦æƒ…é¡µæ ·å¼ (View-Detail)
           ========================================================================== */
        .detail-header {
            margin-bottom: 20px;
        }
        .detail-title {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }
        .back-link {
            font-size: 12px;
            margin-bottom: 10px;
            display: inline-block;
        }
        .stat-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }
        .stat-card {
            background: #fcfcfc;
            border: 1px solid #eee;
            padding: 20px;
            border-radius: 2px;
        }
        .stat-label {
            color: #999;
            font-size: 12px;
            margin-bottom: 10px;
        }
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #333;
        }
        .stat-unit {
            font-size: 12px;
            margin-left: 5px;
            color: #666;
        }
        .chart-placeholder {
            height: 300px;
            background: #fafafa;
            border: 1px dashed #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
            flex-direction: column;
        }

        /* ==========================================================================
           6. æ¨¡æ€æ¡† (è´­ä¹°é¢åº¦)
           ========================================================================== */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        .modal-content {
            background: #fff;
            width: 500px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            border-radius: 2px;
        }
        .modal-header {
            padding: 10px 15px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: bold;
            background: #f8f8f8;
        }
        .modal-close {
            cursor: pointer;
            color: #999;
        }
        .modal-body {
            padding: 20px 40px;
        }
        .form-row {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        .modal-footer {
            padding: 10px 15px;
            text-align: center;
            border-top: 1px solid #eee;
        }
        .btn-confirm {
            background: #ff6600;
            color: #fff;
            border: none;
            width: 120px;
            height: 36px;
            font-size: 14px;
            cursor: pointer;
            border-radius: 2px;
        }

    </style>
</head>
<body>

    <!-- ä¾§è¾¹æ  (ä»¿æˆªå›¾èœå•ç»“æ„) -->
    <aside class="sidebar">
        <div class="logo">
            <!-- æ¨¡æ‹ŸLogoå›¾æ ‡ -->
            <div style="width:30px; height:30px; background:var(--primary-color); border-radius:50%; display:flex; align-items:center; justify-content:center; color:#fff; font-weight:bold; margin-right:10px;">è¯</div>
            <span class="logo-text">ä¾›åº”å•†ç®¡ç†å¹³å°</span>
        </div>
        <div class="menu">
            <div class="menu-item"><span class="menu-icon">â˜†</span>æ”¶è—èœå•<span class="menu-arrow">v</span></div>
            <div class="menu-item"><span class="menu-icon">ğŸ“¦</span>å•†å“ç®¡ç†<span class="menu-arrow">></span></div>
            <div class="menu-item"><span class="menu-icon">ğŸ“„</span>è®¢å•ç®¡ç†<span class="menu-arrow">></span></div>
            <div class="menu-item"><span class="menu-icon">ğŸ·ï¸</span>ä¿ƒé”€ç®¡ç†<span class="menu-arrow">></span></div>
            <div class="menu-item"><span class="menu-icon">ğŸ“¢</span>å¹¿å‘Šç”³è¯·<span class="menu-arrow">></span></div>
            <div class="menu-item"><span class="menu-icon">ğŸ’¬</span>ç”¨æˆ·åé¦ˆ<span class="menu-arrow">></span></div>
            <div class="menu-item"><span class="menu-icon">ğŸ“Š</span>ç»Ÿè®¡åˆ†æ<span class="menu-arrow">></span></div>
            
            <!-- èµ„é‡‘ç®¡ç† -->
            <div class="menu-item" id="menu-fund" onclick="switchMainTab('fund')">
                <span class="menu-icon">ğŸ’°</span>èµ„é‡‘ç®¡ç†
                <span class="menu-arrow">v</span>
            </div>
            <!-- èµ„é‡‘ç®¡ç†å­èœå• (æ¨¡æ‹Ÿ) -->
            <div id="submenu-fund" style="background:#f9f9f9; display:none;">
                <div class="menu-item" style="padding-left:45px; font-size:11px;" onclick="navigateToQuota()">è¥é”€æœåŠ¡é¢åº¦</div>
            </div>

            <div class="menu-item"><span class="menu-icon">ğŸ¥</span>è¯åº—ç®¡ç†<span class="menu-arrow">></span></div>
            <div class="menu-item"><span class="menu-icon">ğŸ‘¨â€âš•ï¸</span>è¯Šæ‰€ä¸“åŒº<span class="menu-arrow">></span></div>
            <div class="menu-item"><span class="menu-icon">ğŸª</span>åº—é“ºç®¡ç†<span class="menu-arrow">></span></div>
            <div class="menu-item"><span class="menu-icon">ğŸ“º</span>ç›´æ’­ç®¡ç†<span class="menu-arrow">></span></div>
            
            <!-- è¥é”€ä¸­å¿ƒ (æ–°å…¥å£) -->
            <div class="menu-item active" id="menu-marketing" onclick="switchMainTab('marketing')">
                <span class="menu-icon">ğŸš€</span>è¥é”€ä¸­å¿ƒ
                <span class="menu-arrow">v</span>
            </div>
             <!-- è¥é”€ä¸­å¿ƒå­èœå• -->
             <div id="submenu-marketing" style="background:#f9f9f9;">
                <div class="menu-item active" style="padding-left:45px; font-size:11px;" onclick="navigateToMarketingList()">ä¸“å“åˆ¸æ¨å¹¿</div>
            </div>
        </div>
    </aside>

    <!-- ä¸»å¸ƒå±€ -->
    <main class="main-layout">
        <!-- é¡¶éƒ¨ Header -->
        <header class="header">
            <div class="header-left">
                <span class="store-name">å¤§åº·å</span>
                <span class="store-badge">åº—é“ºå³å°†ä¸Šæ¶ ?</span>
                <span class="erp-status">â— ERPå¯¹æ¥çŠ¶æ€ï¼š<span>å¯¹æ¥å¼‚å¸¸ï¼Œè¯·æ£€æŸ¥å¯¹æ¥å·¥å…·ï¼</span></span>
            </div>
            <div class="header-right">
                <span>ğŸ”” æ¯ä¸ªç”¨æˆ·çŸ¥æ™“æµ‹è¯•2</span>
                <span>è§„åˆ™ä¸­å¿ƒ</span>
                <span>ä¸‹è½½APP v</span>
                <span>ğŸ“¤ å¯¼å‡ºä»»åŠ¡åˆ—è¡¨</span>
                <span>19918812066 v</span>
            </div>
        </header>

        <!-- é¡¶éƒ¨ Tab æ  -->
        <div class="content-tabs">
            <div class="tab-item" id="tab-home">é¦–é¡µ</div>
            <div class="tab-item active" id="tab-main-title">ä¸“å“åˆ¸æ¨å¹¿</div>
        </div>

        <!-- é¡µé¢å†…å®¹å®¹å™¨ -->
        <div class="page-container">

            <!-- VIEW 1: ä¸“å“åˆ¸æ¨å¹¿åˆ—è¡¨ (ä½äºè¥é”€ä¸­å¿ƒä¸‹) -->
            <div id="view-list">
                <!-- æç¤ºï¼šå¼•å¯¼å»èµ„é‡‘ç®¡ç† -->
                <div style="background:#fff7e6; border:1px solid #ffd591; padding:10px; margin-bottom:15px; font-size:12px; color:#333;">
                    <span style="font-weight:bold; margin-right:5px;">â“˜ è¥é”€é¢åº¦è¯´æ˜ï¼š</span>
                    å½“å‰å¯ç”¨é¢åº¦ï¼š<span style="color:#ff6600; font-weight:bold;">2.52</span> å…ƒã€‚
                    å¦‚éœ€æŸ¥çœ‹æ˜ç»†æˆ–å……å€¼ï¼Œè¯·å‰å¾€ <a onclick="navigateToQuota()">èµ„é‡‘ç®¡ç†-è¥é”€æœåŠ¡é¢åº¦</a>ã€‚
                </div>

                <div class="promotion-list-toolbar">
                    <div>
                        çŠ¶æ€ï¼š
                        <select class="input-control" style="width:100px">
                            <option>å…¨éƒ¨</option>
                            <option>è¿›è¡Œä¸­</option>
                            <option>æœªå¼€å§‹</option>
                        </select>
                        <input type="text" class="input-control" placeholder="è¾“å…¥æ´»åŠ¨åç§°/ID" style="width:180px; margin-left:10px;">
                        <button class="btn-search ml-10">æŸ¥è¯¢</button>
                    </div>
                    <button class="btn-create" onclick="navigateToCreate()">+ æ–°å»ºä¸“å“åˆ¸æ¨å¹¿</button>
                </div>

                <table class="data-table">
                    <thead>
                        <tr>
                            <th width="25%">æ´»åŠ¨åç§°</th>
                            <th width="10%">çŠ¶æ€</th>
                            <th width="15%">æ¨å¹¿è¯å“</th>
                            <th width="10%">å‘åˆ¸é‡</th>
                            <th width="10%">æ ¸é”€æ•°é‡</th>
                            <th width="15%">æ¶ˆè€—é¢åº¦</th>
                            <th width="15%">æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody id="promotion-list-body">
                        <tr>
                            <td>
                                <div class="bold">999æ„Ÿå†’çµé‡‡è´­ä¸“äº«åˆ¸</div>
                                <div class="text-gray">ID: 20231027001</div>
                            </td>
                            <td><span class="promo-status-badge status-running">è¿›è¡Œä¸­</span></td>
                            <td>999æ„Ÿå†’çµé¢—ç²’</td>
                            <td>5,000</td>
                            <td>1,234</td>
                            <td>Â¥ 6,170.00</td>
                            <td>
                                <a onclick="navigateToDetail('20231027001', '999æ„Ÿå†’çµé‡‡è´­ä¸“äº«åˆ¸')">æŸ¥çœ‹æ•°æ®</a>
                                <span style="color:#ddd; margin:0 5px;">|</span>
                                <a style="color:var(--danger-color)">åœæ­¢</a>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="bold">é«˜è¡€å‹æ…¢ç—…å…³æ€€åˆ¸</div>
                                <div class="text-gray">ID: 20231201005</div>
                            </td>
                            <td><span class="promo-status-badge status-pending">æœªå¼€å§‹</span></td>
                            <td>è‹¯ç£ºé…¸æ°¨æ°¯åœ°å¹³ç‰‡</td>
                            <td>10,000</td>
                            <td>0</td>
                            <td>Â¥ 0.00</td>
                            <td>
                                <a onclick="navigateToDetail('20231201005', 'é«˜è¡€å‹æ…¢ç—…å…³æ€€åˆ¸')">æŸ¥çœ‹æ•°æ®</a>
                                <span style="color:#ddd; margin:0 5px;">|</span>
                                <a onclick="navigateToCreate()">ç¼–è¾‘</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- VIEW 2: æ–°å»ºä¸“å“åˆ¸æ¨å¹¿ (Form) -->
            <div id="view-create" class="hidden form-container">
                <a class="back-link" onclick="navigateToMarketingList()">&lt; è¿”å›åˆ—è¡¨</a>
                
                <div class="form-section">
                    <div class="form-title">åŸºç¡€ä¿¡æ¯</div>
                    
                    <div class="form-item" id="field-product">
                        <div class="form-label required">è¯å“é€‰æ‹©</div>
                        <div class="form-content">
                            <div style="display:flex; gap:10px;">
                                <input type="text" class="input-control" id="productInput" placeholder="è¯·è¾“å…¥è¯å“æ‰¹å‡†æ–‡å·æˆ–é€šç”¨å" readonly style="cursor: pointer; width: 300px;" onclick="mockProductSelect()">
                                <button class="btn-cancel" onclick="mockProductSelect()" style="margin:0; width:auto; padding:0 15px;">é€‰æ‹©è¯å“</button>
                            </div>
                            <div class="hint-text">ä»…æ”¯æŒé€‰æ‹©å·²ä¸Šæ¶ä¸”èµ„è´¨åˆè§„çš„è¯å“</div>
                            <div class="error-msg">è¯·é€‰æ‹©æ¨å¹¿è¯å“</div>
                        </div>
                    </div>

                    <div class="form-item">
                        <div class="form-label required">ä¼˜æƒ æ–¹å¼</div>
                        <div class="form-content">
                            <div class="radio-group">
                                <label class="radio-label">
                                    <input type="radio" name="discountType" value="amount" checked onchange="toggleDiscountType()"> å›ºå®šé‡‘é¢ (å‡é’±)
                                </label>
                                <label class="radio-label">
                                    <input type="radio" name="discountType" value="rate" onchange="toggleDiscountType()"> æŠ˜æ‰£ (æ‰“æŠ˜)
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="form-item" id="field-discount-value">
                        <div class="form-label required">é¢é¢è®¾ç½®</div>
                        <div class="form-content">
                            <div id="input-amount-group" style="display:flex; align-items:center;">
                                <span style="margin-right:5px;">å‡</span>
                                <input type="number" class="input-control" style="width: 100px; margin-right:5px;" placeholder="ä¾‹å¦‚: 10">
                                <span>å…ƒ</span>
                            </div>
                            <div id="input-rate-group" class="hidden" style="display:flex; align-items:center;">
                                <span style="margin-right:5px;">æ‰“</span>
                                <input type="number" class="input-control" style="width: 100px; margin-right:5px;" placeholder="ä¾‹å¦‚: 9.5">
                                <span>æŠ˜</span>
                            </div>
                            <div class="error-msg">è¯·è¾“å…¥æœ‰æ•ˆçš„ä¼˜æƒ æ•°å€¼</div>
                        </div>
                    </div>

                    <div class="form-item" id="field-total">
                        <div class="form-label required">å‘æ”¾æ€»å¼ æ•°</div>
                        <div class="form-content">
                            <input type="number" class="input-control" style="width: 150px;" placeholder="è¯·è¾“å…¥æ­£æ•´æ•°">
                            <span style="margin-left:5px;">å¼ </span>
                            <div class="error-msg">è¯·è¾“å…¥å‘æ”¾æ•°é‡</div>
                        </div>
                    </div>

                    <div class="form-item" id="field-date">
                        <div class="form-label required">æœ‰æ•ˆæœŸ</div>
                        <div class="form-content">
                            <input type="date" class="input-control" style="width: 140px;">
                            <span style="margin:0 5px;">è‡³</span>
                            <input type="date" class="input-control" style="width: 140px;">
                            <div class="error-msg">è¯·å®Œå–„æœ‰æ•ˆèµ·æ­¢æ—¶é—´</div>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <div class="form-title">æ¨å¹¿è§„åˆ™</div>
                    <div class="form-item">
                        <div class="form-label">ä½¿ç”¨äººç¾¤</div>
                        <div class="form-content">
                            <input type="text" class="input-control readonly" value="è¯åº—/è¯Šæ‰€æ–°å®¢" disabled style="width: 300px;">
                            <div class="hint-text">ä»…é™åº—é“ºä»æœªé‡‡è´­è¿‡è¯¥è¯å“çš„æ–°å®¢æˆ·é¢†å–</div>
                        </div>
                    </div>
                    <div class="form-item">
                        <div class="form-label">æ”¯ä»˜æ–¹å¼</div>
                        <div class="form-content">
                            <div class="radio-group">
                                <label class="radio-label">
                                    <input type="radio" checked disabled> å…¨å¹³å°å¯ç”¨
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="info-block">
                    <span class="bold">â“˜ è¥é”€æ¶ˆè€—è§„åˆ™ï¼š</span>æ¯æ ¸é”€ 1 å¼ ä¼˜æƒ åˆ¸ï¼Œå°†ä»æ‚¨çš„è´¦æˆ·ä½™é¢ä¸­æ‰£é™¤å¯¹åº”è¥é”€æœåŠ¡é¢åº¦ï¼ˆå³ä¼˜æƒ é‡‘é¢ + æŠ€æœ¯æœåŠ¡è´¹ï¼‰ã€‚
                </div>

                <div style="border-top:1px solid #eee; padding-top:20px; text-align:center;">
                    <button class="btn-cancel" onclick="navigateToMarketingList()">å–æ¶ˆ</button>
                    <button class="btn-submit" onclick="handleSubmit()">ä¿å­˜å¹¶å¯åŠ¨æ¨å¹¿</button>
                </div>
            </div>

            <!-- VIEW 3: æ¨å¹¿æ•ˆæœè¯¦æƒ…é¡µ (Detail) -->
            <div id="view-detail" class="hidden">
                <a class="back-link" onclick="navigateToMarketingList()">&lt; è¿”å›åˆ—è¡¨</a>
                
                <div class="detail-header">
                    <h2 class="detail-title" id="detail-title">æ¨å¹¿æ•ˆæœï¼š999æ„Ÿå†’çµé‡‡è´­ä¸“äº«åˆ¸ (20231027001)</h2>
                </div>

                <div class="stat-grid">
                    <div class="stat-card">
                        <div class="stat-label">å·²å‘åˆ¸æ•°é‡</div>
                        <div class="stat-value">5,000<span class="stat-unit">å¼ </span></div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">å·²æ ¸é”€æ•°é‡</div>
                        <div class="stat-value" style="color: var(--success-color);">1,234<span class="stat-unit">å¼ </span></div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">å·²æ¶ˆè€—è¥é”€é¢åº¦</div>
                        <div class="stat-value" style="color: #ff9900;">6,170.00<span class="stat-unit">å…ƒ</span></div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">å¸¦æ¥æˆäº¤é‡‘é¢</div>
                        <div class="stat-value">125,800.00<span class="stat-unit">å…ƒ</span></div>
                    </div>
                </div>

                <div class="stat-card">
                    <div style="font-weight:bold; margin-bottom:15px; padding-bottom:10px; border-bottom:1px solid #eee;">æ ¸é”€æ•°é‡è¶‹åŠ¿</div>
                    <div class="chart-placeholder">
                        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-bottom: 16px;">
                            <polyline points="23 18 13.5 8.5 8.5 13.5 1 6"></polyline>
                            <polyline points="17 18 11 12 6 17"></polyline>
                        </svg>
                        <div>å›¾è¡¨å¯è§†åŒ–åŒºåŸŸï¼ˆæ ¸é”€è¶‹åŠ¿å›¾ï¼‰</div>
                        <div style="font-size: 12px; margin-top: 8px;">åœ¨æ­¤å¤„å±•ç¤º ECharts æˆ– Highcharts æŠ˜çº¿å›¾</div>
                    </div>
                </div>
            </div>

            <!-- é¡µé¢ 4: è¥é”€æœåŠ¡é¢åº¦ (ä½äºèµ„é‡‘ç®¡ç†ä¸‹ï¼Œè¿˜åŸæˆªå›¾) -->
            <div id="view-quota-details" class="hidden">
                <!-- é¡¶éƒ¨é¢åº¦å¤§æ•°å­— -->
                <div class="quota-header-banner">
                    <span class="quota-big-text">è¥é”€æœåŠ¡é¢åº¦ï¼š</span>
                    <span class="quota-number">2.52</span>
                    <button class="btn-buy" onclick="openBuyModal()">è´­ä¹°é¢åº¦</button>
                    <div class="quota-desc">
                        <div>è¯´æ˜</div>
                        <div>æµ‹è¯•æµ‹è¯• æµ‹è¯•1</div>
                    </div>
                </div>

                <!-- ç­›é€‰æ  -->
                <div class="filter-bar">
                    <div class="filter-item">
                        <span class="filter-label">æ—¶é—´</span>
                        <input type="text" class="input-control" placeholder="" value="">
                        <input type="text" class="input-control" placeholder="00:00:00" style="width:80px; margin-left:5px;">
                        <span style="margin:0 5px;">--</span>
                        <input type="text" class="input-control" placeholder="23:59:59" style="width:80px;">
                    </div>
                    <div class="filter-item">
                        <span class="filter-label">æ¥æº</span>
                        <select class="input-control">
                            <option>å…¨éƒ¨</option>
                        </select>
                    </div>
                    <button class="btn-search">æœ ç´¢</button>
                    <button class="btn-export">å¯¼ å‡º</button>
                </div>

                <div style="margin-bottom:10px; color:#666;">
                    æ˜¾ç¤º <select style="border:1px solid #ccc;"><option>10</option></select> æ¡æ•°æ®
                </div>

                <!-- é¢åº¦æ˜ç»†è¡¨æ ¼ -->
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>æ—¶é—´</th>
                            <th>è®¢å•å·</th>
                            <th>ä¸šåŠ¡ç±»å‹</th>
                            <th>æ´»åŠ¨ID</th>
                            <th>æ”¶æ”¯</th>
                            <th>æ¥æº</th>
                            <th>è¥é”€é¢åº¦</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- æ–°å¢éœ€æ±‚ï¼šä¸“å“åˆ¸æ¨å¹¿æ ¸é”€æ‰£è´¹ -->
                        <tr>
                            <td>2023-11-21 22:55:10</td>
                            <td>1312797300</td>
                            <td>ä¸“å“åˆ¸æ¨å¹¿-æ ¸é”€æ‰£è´¹</td>
                            <td>20231027001</td>
                            <td>-5.00</td>
                            <td>å•†å®¶èµ ä»˜</td>
                            <td>2.52</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>2023-11-21 22:50:04</td>
                            <td>1312797294</td>
                            <td>å°é¢æ‰“æ¬¾</td>
                            <td></td>
                            <td>-1.00</td>
                            <td>å•†å®¶èµ ä»˜</td>
                            <td>7.52</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>2023-11-21 22:50:04</td>
                            <td>1312797293</td>
                            <td>å°é¢æ‰“æ¬¾</td>
                            <td></td>
                            <td>-100.00</td>
                            <td>å•†å®¶èµ ä»˜</td>
                            <td>8.52</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>2023-11-21 22:50:03</td>
                            <td>1312797292</td>
                            <td>å°é¢æ‰“æ¬¾</td>
                            <td></td>
                            <td>-100.00</td>
                            <td>å•†å®¶èµ ä»˜</td>
                            <td>108.52</td>
                            <td></td>
                        </tr>
                         <tr>
                            <td>2023-11-21 20:30:06</td>
                            <td>1312797283</td>
                            <td>å°é¢æ‰“æ¬¾</td>
                            <td></td>
                            <td>-166.00</td>
                            <td>å•†å®¶èµ ä»˜</td>
                            <td>208.52</td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>
                
                <div style="background:#f9f9f9; padding:10px; border:1px solid #ddd; border-top:none; display:flex; justify-content:space-between; align-items:center;">
                    <span>æ€»å…±494æ¡æ•°æ® (å½“å‰ä¸ºç¬¬1æ¡åˆ°ç¬¬10æ¡)</span>
                    <div style="display:flex; gap:5px;">
                        <button style="padding:2px 8px; border:1px solid #ddd; background:#fff;">Â«</button>
                        <button style="padding:2px 8px; border:1px solid #ddd; background:#fff;">â€¹</button>
                        <button style="padding:2px 8px; border:1px solid #ddd; background:#e65c00; color:#fff;">1</button>
                        <button style="padding:2px 8px; border:1px solid #ddd; background:#fff;">2</button>
                        <button style="padding:2px 8px; border:1px solid #ddd; background:#fff;">3</button>
                        <button style="padding:2px 8px; border:1px solid #ddd; background:#fff;">4</button>
                        <button style="padding:2px 8px; border:1px solid #ddd; background:#fff;">5</button>
                        <button style="padding:2px 8px; border:1px solid #ddd; background:#fff;">â€º</button>
                        <button style="padding:2px 8px; border:1px solid #ddd; background:#fff;">Â»</button>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <!-- å¼¹çª—ï¼šè´­ä¹°è¥é”€æœåŠ¡é¢åº¦ -->
    <div id="modal-buy-quota" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <span>è´­ä¹°è¥é”€æœåŠ¡é¢åº¦</span>
                <span class="modal-close" onclick="closeBuyModal()">Ã—</span>
            </div>
            <div class="modal-body">
                <div class="form-row">
                    <label class="form-label">é¢åº¦ï¼š</label>
                    <select class="input-control" style="width:200px">
                        <option>100 (ä»·å€¼100å…ƒ)</option>
                        <option>500 (ä»·å€¼500å…ƒ)</option>
                        <option>1000 (ä»·å€¼1000å…ƒ)</option>
                    </select>
                </div>
                <div class="form-row">
                    <label class="form-label">æ”¯ä»˜æ–¹å¼ï¼š</label>
                    <div style="font-size:12px;">
                        <label style="margin-right:15px; cursor:pointer;">
                            <input type="radio" name="payType" checked> ä½™é¢æ”¯ä»˜ (å¯ç”¨ä½™é¢66.88)
                        </label>
                        <label style="cursor:pointer;">
                            <input type="radio" name="payType"> å¯¹å…¬æ±‡æ¬¾
                        </label>
                    </div>
                </div>
                <div class="form-row">
                    <label class="form-label">çŸ­ä¿¡éªŒè¯ç ï¼š</label>
                    <input type="text" class="input-control" style="width:100px; margin-right:10px;">
                    <button style="height:28px; background:#ffaa55; color:#fff; border:none; padding:0 10px; border-radius:2px; cursor:pointer;">è·å–éªŒè¯ç </button>
                </div>
                <div style="margin-left:95px; font-size:12px; color:#666;">
                    éªŒè¯ç å°†å‘é€è‡³æ‰‹æœºå·ï¼š123****
                </div>
                <div style="margin-top:20px; text-align:center;">
                    <button class="btn-confirm" onclick="closeBuyModal()">ç¡®è®¤æäº¤</button>
                </div>
                <div style="margin-top:20px; font-size:12px; color:#999; line-height:1.6;">
                    ä½™é¢æ”¯ä»˜ä¸ºå•†å®¶è‡ªè¡Œå¼€å±•çš„è¥é”€æ´»åŠ¨ï¼Œå¹³å°ä¸æä¾›å¼€ç¥¨æœåŠ¡ã€‚<br>
                    å¦‚éœ€ç”µæ±‡è½¬è´¦ï¼Œè¯·é€‰æ‹©â€œå¯¹å…¬æ±‡æ¬¾â€ã€‚
                </div>
            </div>
        </div>
    </div>

    <script>
        // å…¨å±€çŠ¶æ€ç®¡ç†
        let currentTab = 'marketing'; // 'marketing' | 'fund'

        // å¯¼èˆªåˆ‡æ¢é€»è¾‘ (Top Level Sidebar)
        function switchMainTab(module) {
            currentTab = module;

            // é‡ç½®ä¾§è¾¹æ çŠ¶æ€
            document.getElementById('menu-fund').classList.remove('active');
            document.getElementById('submenu-fund').style.display = 'none';
            document.getElementById('menu-marketing').classList.remove('active');
            document.getElementById('submenu-marketing').style.display = 'none';

            if (module === 'fund') {
                document.getElementById('menu-fund').classList.add('active');
                document.getElementById('submenu-fund').style.display = 'block';
            } else if (module === 'marketing') {
                document.getElementById('menu-marketing').classList.add('active');
                document.getElementById('submenu-marketing').style.display = 'block';
                
                // ä¿®å¤ï¼šç›´æ¥åœ¨æ­¤å¤„æ‰§è¡Œæ˜¾ç¤ºåˆ—è¡¨é¡µçš„é€»è¾‘ï¼Œé¿å…ä¸ navigateToMarketingList å¾ªç¯è°ƒç”¨
                hideAllViews();
                document.getElementById('view-list').classList.remove('hidden');
                updateTabTitle('ä¸“å“åˆ¸æ¨å¹¿');
            }
        }

        // èµ„é‡‘ç®¡ç† - è·³è½¬åˆ°é¢åº¦æ˜ç»†
        function navigateToQuota() {
            switchMainTab('fund');
            
            hideAllViews();
            document.getElementById('view-quota-details').classList.remove('hidden');
            
            updateTabTitle('è¥é”€æœåŠ¡é¢åº¦');
        }

        // è¥é”€ä¸­å¿ƒ - è·³è½¬åˆ°åˆ—è¡¨
        function navigateToMarketingList() {
            // ä¿®å¤ï¼šä»…éœ€è°ƒç”¨ switchMainTab å³å¯ï¼Œå› ä¸º switchMainTab å†…éƒ¨å·²ç»åŒ…å«äº†æ˜¾ç¤ºåˆ—è¡¨çš„é€»è¾‘
            switchMainTab('marketing'); 
        }

        // è¥é”€ä¸­å¿ƒ - è·³è½¬åˆ°æ–°å»º
        function navigateToCreate() {
            hideAllViews();
            document.getElementById('view-create').classList.remove('hidden');
            updateTabTitle('ä¸“å“åˆ¸æ¨å¹¿ / æ–°å»º');
            
            // é‡ç½®è¡¨å•é”™è¯¯
            document.querySelectorAll('.form-item').forEach(el => el.classList.remove('has-error'));
        }

        // è¥é”€ä¸­å¿ƒ - è·³è½¬åˆ°è¯¦æƒ…
        function navigateToDetail(id, name) {
            hideAllViews();
            document.getElementById('view-detail').classList.remove('hidden');
            
            const title = name ? `æ¨å¹¿æ•ˆæœï¼š${name}` : 'æ¨å¹¿æ•ˆæœè¯¦æƒ…';
            document.getElementById('detail-title').innerText = `${title} (${id})`;
            updateTabTitle('ä¸“å“åˆ¸æ¨å¹¿ / è¯¦æƒ…');
        }

        // è¾…åŠ©ï¼šéšè—æ‰€æœ‰è§†å›¾
        function hideAllViews() {
            document.getElementById('view-list').classList.add('hidden');
            document.getElementById('view-create').classList.add('hidden');
            document.getElementById('view-detail').classList.add('hidden');
            document.getElementById('view-quota-details').classList.add('hidden');
        }

        // è¾…åŠ©ï¼šæ›´æ–°é¡¶éƒ¨ Tab æ ‡é¢˜
        function updateTabTitle(text) {
            const tab = document.getElementById('tab-main-title');
            tab.innerText = text;
            tab.classList.add('active');
        }

        // ==========================================
        // ä¸šåŠ¡é€»è¾‘ï¼šæ–°å»ºæ¨å¹¿è¡¨å•äº¤äº’
        // ==========================================

        function mockProductSelect() {
            const input = document.getElementById('productInput');
            const mockProducts = [
                "SKU: 8801024 - é˜¿è«è¥¿æ—èƒ¶å›Š 0.25g*48ç²’/ç›’ (ç™½äº‘å±±)",
                "SKU: 8805012 - å¸ƒæ´›èŠ¬ç¼“é‡Šèƒ¶å›Š 0.3g*24ç²’/ç›’ (èŠ¬å¿…å¾—)",
                "SKU: 8803399 - è¿èŠ±æ¸…ç˜Ÿèƒ¶å›Š 0.35g*24ç²’/ç›’ (ä»¥å²­è¯ä¸š)"
            ];
            const randomProduct = mockProducts[Math.floor(Math.random() * mockProducts.length)];
            input.value = randomProduct;
            document.getElementById('field-product').classList.remove('has-error');
        }

        function toggleDiscountType() {
            const type = document.querySelector('input[name="discountType"]:checked').value;
            const amountGroup = document.getElementById('input-amount-group');
            const rateGroup = document.getElementById('input-rate-group');
            
            if (type === 'amount') {
                amountGroup.classList.remove('hidden');
                amountGroup.style.display = 'flex';
                rateGroup.classList.add('hidden');
            } else {
                amountGroup.classList.add('hidden');
                rateGroup.classList.remove('hidden');
                rateGroup.style.display = 'flex';
            }
        }

        function handleSubmit() {
            let hasError = false;

            // 1. éªŒè¯è¯å“
            const productVal = document.getElementById('productInput').value;
            if (!productVal) {
                document.getElementById('field-product').classList.add('has-error');
                hasError = true;
            }

            // 2. éªŒè¯æ•°é‡
            const totalInput = document.querySelector('#field-total input');
            const totalVal = totalInput.value;
            if (!totalVal || totalVal <= 0) {
                document.getElementById('field-total').classList.add('has-error');
                hasError = true;
            } else {
                document.getElementById('field-total').classList.remove('has-error');
            }

            // 3. éªŒè¯æ—¥æœŸ
            const dateInputs = document.querySelectorAll('#field-date input');
            if (!dateInputs[0].value || !dateInputs[1].value) {
                document.getElementById('field-date').classList.add('has-error');
                hasError = true;
            } else {
                document.getElementById('field-date').classList.remove('has-error');
            }

            if (hasError) return;

            // æ¨¡æ‹Ÿæäº¤æˆåŠŸ
            alert("æäº¤æˆåŠŸï¼\næ¨å¹¿æ´»åŠ¨å·²åˆ›å»ºã€‚");
            
            // ç®€å•æ’å…¥ä¸€æ¡æ–°æ•°æ®åˆ°åˆ—è¡¨ç”¨äºæ¼”ç¤º
            const newId = '2023' + Math.floor(100000 + Math.random() * 900000);
            let drugName = productVal.split('-')[1] || 'æœªçŸ¥è¯å“';
            drugName = drugName.trim().split(' ')[0];
            const voucherName = drugName + ' é‡‡è´­ä¸“äº«åˆ¸';
            
            const tbody = document.getElementById('promotion-list-body');
            const row = `
                 <tr>
                    <td>
                        <div class="bold">${voucherName}</div>
                        <div class="text-gray">ID: ${newId}</div>
                    </td>
                    <td><span class="promo-status-badge status-pending">æœªå¼€å§‹</span></td>
                    <td>${drugName}</td>
                    <td>${Number(totalVal).toLocaleString()}</td>
                    <td>0</td>
                    <td>Â¥ 0.00</td>
                    <td>
                        <a onclick="navigateToDetail('${newId}', '${voucherName}')">æŸ¥çœ‹æ•°æ®</a>
                        <span style="color:#ddd; margin:0 5px;">|</span>
                        <a onclick="navigateToCreate()">ç¼–è¾‘</a>
                    </td>
                </tr>
            `;
            tbody.insertAdjacentHTML('afterbegin', row);

            navigateToMarketingList();
        }


        // ==========================================
        // ä¸šåŠ¡é€»è¾‘ï¼šå¼¹çª—
        // ==========================================
        function openBuyModal() {
            document.getElementById('modal-buy-quota').classList.remove('hidden');
        }

        function closeBuyModal() {
            document.getElementById('modal-buy-quota').classList.add('hidden');
        }

        // åˆå§‹åŒ–
        switchMainTab('marketing');

    </script>
</body>
</html>
